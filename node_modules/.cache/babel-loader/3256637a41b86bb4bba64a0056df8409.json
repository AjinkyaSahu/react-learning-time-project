{"ast":null,"code":"import _objectSpread from\"/home/ajinkya/Resources/React/movie-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/home/ajinkya/Resources/React/movie-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/ajinkya/Resources/React/movie-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{SEARCH_BASE_URL,POPULAR_BASE_URL,API_URL,API_KEY,REQUEST_TOKEN_URL,LOGIN_URL,SESSION_ID_URL}from\"./config\";var defaultConfig={method:\"POST\",headers:{\"Content-Type\":\"application/json\"}};var apiSettings={fetchMovies:function(){var _fetchMovies=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(searchTerm,page){var endpoint;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:endpoint=searchTerm?\"\".concat(SEARCH_BASE_URL).concat(searchTerm,\"&page=\").concat(page):\"\".concat(POPULAR_BASE_URL,\"&page=\").concat(page);_context.next=3;return fetch(endpoint);case 3:_context.next=5;return _context.sent.json();case 5:return _context.abrupt(\"return\",_context.sent);case 6:case\"end\":return _context.stop();}}},_callee);}));function fetchMovies(_x,_x2){return _fetchMovies.apply(this,arguments);}return fetchMovies;}(),fetchMovie:function(){var _fetchMovie=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(movieId){var endpoint;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:endpoint=\"\".concat(API_URL,\"movie/\").concat(movieId,\"?api_key=\").concat(API_KEY);_context2.next=3;return fetch(endpoint);case 3:_context2.next=5;return _context2.sent.json();case 5:return _context2.abrupt(\"return\",_context2.sent);case 6:case\"end\":return _context2.stop();}}},_callee2);}));function fetchMovie(_x3){return _fetchMovie.apply(this,arguments);}return fetchMovie;}(),fetchCredits:function(){var _fetchCredits=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(movieId){var creditsEndpoint;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:creditsEndpoint=\"\".concat(API_URL,\"movie/\").concat(movieId,\"/credits?api_key=\").concat(API_KEY);_context3.next=3;return fetch(creditsEndpoint);case 3:_context3.next=5;return _context3.sent.json();case 5:return _context3.abrupt(\"return\",_context3.sent);case 6:case\"end\":return _context3.stop();}}},_callee3);}));function fetchCredits(_x4){return _fetchCredits.apply(this,arguments);}return fetchCredits;}(),// Bonus material below for login\ngetRequestToken:function(){var _getRequestToken=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var reqToken;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return fetch(REQUEST_TOKEN_URL);case 2:_context4.next=4;return _context4.sent.json();case 4:reqToken=_context4.sent;return _context4.abrupt(\"return\",reqToken.request_token);case 6:case\"end\":return _context4.stop();}}},_callee4);}));function getRequestToken(){return _getRequestToken.apply(this,arguments);}return getRequestToken;}(),authenticate:function(){var _authenticate=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(requestToken,username,password){var bodyData,data,sessionId;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:bodyData={username:username,password:password,request_token:requestToken};// First authenticate the requestToken\n_context5.next=3;return fetch(LOGIN_URL,_objectSpread(_objectSpread({},defaultConfig),{},{body:JSON.stringify(bodyData)}));case 3:_context5.next=5;return _context5.sent.json();case 5:data=_context5.sent;if(!data.success){_context5.next=13;break;}_context5.next=9;return fetch(SESSION_ID_URL,_objectSpread(_objectSpread({},defaultConfig),{},{body:JSON.stringify({request_token:requestToken})}));case 9:_context5.next=11;return _context5.sent.json();case 11:sessionId=_context5.sent;return _context5.abrupt(\"return\",sessionId);case 13:case\"end\":return _context5.stop();}}},_callee5);}));function authenticate(_x5,_x6,_x7){return _authenticate.apply(this,arguments);}return authenticate;}(),rateMovie:function(){var _rateMovie=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(sessionId,movieId,value){var endpoint,rating;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:endpoint=\"\".concat(API_URL,\"movie/\").concat(movieId,\"/rating?api_key=\").concat(API_KEY,\"&session_id=\").concat(sessionId);_context6.next=3;return fetch(endpoint,_objectSpread(_objectSpread({},defaultConfig),{},{body:JSON.stringify({value:value})}));case 3:_context6.next=5;return _context6.sent.json();case 5:rating=_context6.sent;return _context6.abrupt(\"return\",rating);case 7:case\"end\":return _context6.stop();}}},_callee6);}));function rateMovie(_x8,_x9,_x10){return _rateMovie.apply(this,arguments);}return rateMovie;}()};export default apiSettings;","map":{"version":3,"sources":["/home/ajinkya/Resources/React/movie-app/src/API.js"],"names":["SEARCH_BASE_URL","POPULAR_BASE_URL","API_URL","API_KEY","REQUEST_TOKEN_URL","LOGIN_URL","SESSION_ID_URL","defaultConfig","method","headers","apiSettings","fetchMovies","searchTerm","page","endpoint","fetch","json","fetchMovie","movieId","fetchCredits","creditsEndpoint","getRequestToken","reqToken","request_token","authenticate","requestToken","username","password","bodyData","body","JSON","stringify","data","success","sessionId","rateMovie","value","rating"],"mappings":"sdAAA,OACEA,eADF,CAEEC,gBAFF,CAGEC,OAHF,CAIEC,OAJF,CAKEC,iBALF,CAMEC,SANF,CAOEC,cAPF,KAQO,UARP,CAUA,GAAMC,CAAAA,aAAa,CAAG,CACpBC,MAAM,CAAE,MADY,CAEpBC,OAAO,CAAE,CACP,eAAgB,kBADT,CAFW,CAAtB,CAOA,GAAMC,CAAAA,WAAW,CAAG,CAClBC,WAAW,qFAAE,iBAAOC,UAAP,CAAmBC,IAAnB,+HACLC,QADK,CACMF,UAAU,WACpBZ,eADoB,SACFY,UADE,kBACiBC,IADjB,YAEpBZ,gBAFoB,kBAEKY,IAFL,CADhB,uBAISE,CAAAA,KAAK,CAACD,QAAD,CAJd,6CAI0BE,IAJ1B,+GAAF,iGADO,CAOlBC,UAAU,oFAAE,kBAAOC,OAAP,mIACJJ,QADI,WACUZ,OADV,kBAC0BgB,OAD1B,qBAC6Cf,OAD7C,yBAEUY,CAAAA,KAAK,CAACD,QAAD,CAFf,+CAE2BE,IAF3B,mHAAF,2FAPQ,CAWlBG,YAAY,sFAAE,kBAAOD,OAAP,0IACNE,eADM,WACelB,OADf,kBAC+BgB,OAD/B,6BAC0Df,OAD1D,yBAEQY,CAAAA,KAAK,CAACK,eAAD,CAFb,+CAEgCJ,IAFhC,mHAAF,iGAXM,CAgBlB;AACAK,eAAe,yFAAE,4KACeN,CAAAA,KAAK,CAACX,iBAAD,CADpB,+CACyCY,IADzC,UACTM,QADS,iDAERA,QAAQ,CAACC,aAFD,0DAAF,uGAjBG,CAqBlBC,YAAY,sFAAE,kBAAOC,YAAP,CAAqBC,QAArB,CAA+BC,QAA/B,kJACNC,QADM,CACK,CACfF,QAAQ,CAARA,QADe,CAEfC,QAAQ,CAARA,QAFe,CAGfJ,aAAa,CAAEE,YAHA,CADL,CAMZ;AANY,uBAQJV,CAAAA,KAAK,CAACV,SAAD,gCACNE,aADM,MAETsB,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAeH,QAAf,CAFG,GARD,+CAYVZ,IAZU,UAONgB,IAPM,oBAcRA,IAAI,CAACC,OAdG,kDAgBFlB,CAAAA,KAAK,CAACT,cAAD,gCACNC,aADM,MAETsB,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAAER,aAAa,CAAEE,YAAjB,CAAf,CAFG,GAhBH,gDAoBRT,IApBQ,WAeJkB,SAfI,iDAqBHA,SArBG,2DAAF,yGArBM,CA6ClBC,SAAS,mFAAE,kBAAOD,SAAP,CAAkBhB,OAAlB,CAA2BkB,KAA3B,0IACHtB,QADG,WACWZ,OADX,kBAC2BgB,OAD3B,4BACqDf,OADrD,wBAC2E+B,SAD3E,yBAIDnB,CAAAA,KAAK,CAACD,QAAD,gCACNP,aADM,MAETsB,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAAEK,KAAK,CAALA,KAAF,CAAf,CAFG,GAJJ,+CAQPpB,IARO,UAGHqB,MAHG,iDAUFA,MAVE,0DAAF,iGA7CS,CAApB,CA2DA,cAAe3B,CAAAA,WAAf","sourcesContent":["import {\n  SEARCH_BASE_URL,\n  POPULAR_BASE_URL,\n  API_URL,\n  API_KEY,\n  REQUEST_TOKEN_URL,\n  LOGIN_URL,\n  SESSION_ID_URL,\n} from \"./config\";\n\nconst defaultConfig = {\n  method: \"POST\",\n  headers: {\n    \"Content-Type\": \"application/json\",\n  },\n};\n\nconst apiSettings = {\n  fetchMovies: async (searchTerm, page) => {\n    const endpoint = searchTerm\n      ? `${SEARCH_BASE_URL}${searchTerm}&page=${page}`\n      : `${POPULAR_BASE_URL}&page=${page}`;\n    return await (await fetch(endpoint)).json();\n  },\n  fetchMovie: async (movieId) => {\n    const endpoint = `${API_URL}movie/${movieId}?api_key=${API_KEY}`;\n    return await (await fetch(endpoint)).json();\n  },\n  fetchCredits: async (movieId) => {\n    const creditsEndpoint = `${API_URL}movie/${movieId}/credits?api_key=${API_KEY}`;\n    return await (await fetch(creditsEndpoint)).json();\n  },\n\n  // Bonus material below for login\n  getRequestToken: async () => {\n    const reqToken = await (await fetch(REQUEST_TOKEN_URL)).json();\n    return reqToken.request_token;\n  },\n  authenticate: async (requestToken, username, password) => {\n    const bodyData = {\n      username,\n      password,\n      request_token: requestToken,\n    };\n    // First authenticate the requestToken\n    const data = await (\n      await fetch(LOGIN_URL, {\n        ...defaultConfig,\n        body: JSON.stringify(bodyData),\n      })\n    ).json();\n    // Then get the sessionId with the requestToken\n    if (data.success) {\n      const sessionId = await (\n        await fetch(SESSION_ID_URL, {\n          ...defaultConfig,\n          body: JSON.stringify({ request_token: requestToken }),\n        })\n      ).json();\n      return sessionId;\n    }\n  },\n  rateMovie: async (sessionId, movieId, value) => {\n    const endpoint = `${API_URL}movie/${movieId}/rating?api_key=${API_KEY}&session_id=${sessionId}`;\n\n    const rating = await (\n      await fetch(endpoint, {\n        ...defaultConfig,\n        body: JSON.stringify({ value }),\n      })\n    ).json();\n\n    return rating;\n  },\n};\n\nexport default apiSettings;\n"]},"metadata":{},"sourceType":"module"}